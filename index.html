<html>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <header style="font-size: 10vw;display: flex;justify-content:center;vertical-align: top;">
        <h1 style="margin: auto;"><img src="logo.png" style="max-width: 90%;max-height: 90%;"></h1>
    </header>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ESQQQVT5P6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ESQQQVT5P6');
</script>
    
    
    <body style="font-size: 2vw;text-align: center;">
        <form name="form1" id="form1" style="margin: auto;text-align: center">
        <p style="display: inline" id="roomStartText">Room # start: </p><select name="number" id="roomNumber">
                <option value="" selected="selected" id="firstOption">Pick room number</option>
            </select><br><br>
        Destination: <select name="number2" id="roomNumber2">
                <option value="" selected="selected">Pick room number</option>
            </select>
        </form>
        <br>
        <br>
        <button id="submit" onclick="submit();" style="padding: 15px;border-radius: 15px;background-color: orangered">Submit</button>
    </body>
    <script>const nodes = new Map();const floorNodes = new Map();const neighbors = new Map();const roomToNode = new Map();</script>
    <script src="Data/loadRooms.js"></script>
    <script>
    params = new URLSearchParams(window.location.search);
    
    var roomsSelect;
    var destinationSelect;
    roomToNodeAsc = new Map([...roomToNode.entries()].sort(function(a,b){
        if(a[0]=="Commons" || a[0]=="Main Office" || a[0]=="Pantheon/Auditorium" || a[0]=="Main Gym") {return -1;}
        if(b[0]=="Commons" || b[0]=="Main Office" || b[0]=="Pantheon/Auditorium" || b[0]=="Main Gym") {return 1;}
        return Number(a[0])-Number(b[0]);
    }));
    window.onload = function() {
        roomsSelect = document.getElementById("roomNumber");
        destinationSelect = document.getElementById("roomNumber2");
        for(var key of roomToNodeAsc.keys()) {
            roomsSelect.options[roomsSelect.options.length]=new Option(key,key);
            destinationSelect.options[destinationSelect.options.length]=new Option(key,key);
        }
        // TODO
        if(params.has("start")) {
            document.getElementById("firstOption").text=params.get("start");
            document.getElementById("roomStartText").innerHTML="Current position: ";
        }
    }
    function submit() {
        console.log(roomsSelect);
        //window.location.href="https://colin9012.github.io/nav.html?start="+roomsSelect.options[roomsSelect.selectedIndex].text+"&end="+destinationSelect.options[destinationSelect.selectedIndex].text;
        window.location.href="https://colin9012.github.io/nav.html?start="+roomsSelect.options[roomsSelect.selectedIndex].text+"&end="+destinationSelect.options[destinationSelect.selectedIndex].text;
    }
    </script>
</html>
